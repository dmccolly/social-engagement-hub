<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Interactive Newsfeed - Social Engagement Hub</title>
    <link rel="stylesheet" href="interactive-styles.css">
    <link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/font-awesome/6.0.0/css/all.min.css">
    <!-- Emoji picker -->
    <link rel="stylesheet" href="https://cdn.jsdelivr.net/npm/emoji-picker-element@1.0.0/index.css">
<script src="https://sites.super.myninja.ai/_assets/ninja-daytona-script.js"></script>
</head>
<body>
    <div class="newsfeed-container">
        <!-- Header -->
        <div class="newsfeed-header">
            <div class="header-content">
                <h1><i class="fas fa-newspaper"></i> Interactive Newsfeed</h1>
                <p>Join the conversation - Share, connect, and engage with our community</p>
            </div>
            <div class="header-actions">
                <button class="btn btn-primary" onclick="showPostCreator()">
                    <i class="fas fa-plus"></i> Create Post
                </button>
                <button class="btn btn-secondary" onclick="showVisitorSignUp()">
                    <i class="fas fa-user-plus"></i> Join Community
                </button>
            </div>
        </div>

        <!-- Main Content Area -->
        <div class="newsfeed-main">
            <!-- Left Sidebar - User Info & Stats -->
            <div class="sidebar-left">
                <div class="user-card" id="userCard">
                    <div class="visitor-signup-prompt">
                        <i class="fas fa-users fa-2x"></i>
                        <h3>Join Our Community</h3>
                        <p>Sign up to post, comment, and engage with others</p>
                        <button class="btn btn-primary" onclick="showVisitorSignUp()">Sign Up Now</button>
                    </div>
                </div>

                <div class="community-stats">
                    <h4>Community Stats</h4>
                    <div class="stat-item">
                        <span class="stat-number" id="totalPosts">0</span>
                        <span class="stat-label">Posts</span>
                    </div>
                    <div class="stat-item">
                        <span class="stat-number" id="totalMembers">0</span>
                        <span class="stat-label">Members</span>
                    </div>
                    <div class="stat-item">
                        <span class="stat-number" id="totalInteractions">0</span>
                        <span class="stat-label">Interactions</span>
                    </div>
                </div>

                <div class="trending-topics">
                    <h4>Trending Now</h4>
                    <div id="trendingList" class="trending-list">
                        <!-- Trending topics will populate here -->
                    </div>
                </div>
            </div>

            <!-- Center - Newsfeed -->
            <div class="newsfeed-center">
                <!-- Facebook Widget -->
                <div class="facebook-widget">
                    <div class="facebook-header">
                        <h3><i class="fab fa-facebook"></i> Social Feed</h3>
                        <div class="facebook-tabs">
                            <button class="tab-btn active" data-tab="posts">Posts</button>
                            <button class="tab-btn" data-tab="stories">Stories</button>
                            <button class="tab-btn" data-tab="live">Live</button>
                        </div>
                    </div>
                    
                    <div class="facebook-content">
                        <!-- Post Creator -->
                        <div class="post-creator-fb">
                            <div class="creator-avatar">
                                <img src="https://picsum.photos/seed/currentuser/40/40" alt="You">
                            </div>
                            <div class="creator-input">
                                <textarea placeholder="What's on your mind?" id="facebookPostInput"></textarea>
                                <div class="creator-options">
                                    <button class="option-btn" data-action="photo">
                                        <i class="fas fa-image"></i> Photo
                                    </button>
                                    <button class="option-btn" data-action="video">
                                        <i class="fas fa-video"></i> Video
                                    </button>
                                    <button class="option-btn" data-action="feeling">
                                        <i class="fas fa-smile"></i> Feeling
                                    </button>
                                    <button class="option-btn" data-action="location">
                                        <i class="fas fa-map-marker-alt"></i> Location
                                    </button>
                                </div>
                                <button class="post-btn" id="facebookPostBtn">Post</button>
                            </div>
                        </div>
                        
                        <!-- Facebook Posts Container -->
                        <div class="facebook-posts" id="facebookPosts">
                            <!-- Posts will be loaded here -->
                        </div>
                    </div>
                </div>
                <!-- Post Creation Area -->
                <div class="post-creator" id="postCreator" style="display: none;">
                    <div class="creator-header">
                        <h3>Create a Post</h3>
                        <button class="btn-close" onclick="hidePostCreator()">
                            <i class="fas fa-times"></i>
                        </button>
                    </div>
                    <div class="creator-content">
                        <div class="user-info">
                            <img src="https://images.unsplash.com/photo-1472099645785-5658abf4ff4e?w=40&h=40&fit=crop&crop=face" alt="User" class="user-avatar">
                            <div class="user-details">
                                <span class="user-name" id="currentUserName">Visitor</span>
                                <span class="post-visibility">
                                    <i class="fas fa-globe"></i> Public
                                </span>
                            </div>
                        </div>
                        
                        <div class="post-content-area">
                            <textarea 
                                id="postContent" 
                                class="post-textarea" 
                                placeholder="What's on your mind? Share your thoughts with the community..."
                                maxlength="1000"
                            ></textarea>
                            <div class="char-count">0 / 1000</div>
                        </div>

                        <div class="post-media-area">
                            <div class="media-upload-zone" id="mediaUploadZone">
                                <i class="fas fa-camera fa-2x"></i>
                                <p>Click to add photos or drag and drop</p>
                                <input type="file" id="mediaInput" multiple accept="image/*,video/*" style="display: none;">
                            </div>
                            <div class="media-preview" id="mediaPreview"></div>
                        </div>

                        <div class="post-actions">
                            <div class="action-buttons">
                                <button class="action-btn" onclick="insertEmoji()" title="Add Emoji">
                                    <i class="fas fa-smile"></i>
                                </button>
                                <button class="action-btn" onclick="mentionUser()" title="Mention Someone">
                                    <i class="fas fa-at"></i>
                                </button>
                                <button class="action-btn" onclick="addHashtag()" title="Add Hashtag">
                                    <i class="fas fa-hashtag"></i>
                                </button>
                                <button class="action-btn" onclick="addLocation()" title="Add Location">
                                    <i class="fas fa-map-marker-alt"></i>
                                </button>
                            </div>
                            <button class="btn btn-primary" onclick="publishPost()">
                                <i class="fas fa-paper-plane"></i> Post
                            </button>
                        </div>
                    </div>
                </div>

                <!-- Visitor Sign-up Modal -->
                <div class="modal" id="visitorSignUpModal" style="display: none;">
                    <div class="modal-content">
                        <div class="modal-header">
                            <h3>Join Our Community</h3>
                            <button class="btn-close" onclick="hideVisitorSignUp()">
                                <i class="fas fa-times"></i>
                            </button>
                        </div>
                        <div class="modal-body">
                            <form id="visitorForm">
                                <div class="form-group">
                                    <label for="visitorName">Your Name *</label>
                                    <input type="text" id="visitorName" class="form-input" required placeholder="Enter your full name">
                                </div>
                                <div class="form-group">
                                    <label for="visitorEmail">Email Address *</label>
                                    <input type="email" id="visitorEmail" class="form-input" required placeholder="your@email.com">
                                </div>
                                <div class="form-group">
                                    <label for="visitorInterests">Interests (optional)</label>
                                    <input type="text" id="visitorInterests" class="form-input" placeholder="e.g., Technology, Business, Lifestyle">
                                </div>
                                <div class="form-group">
                                    <label class="checkbox-label">
                                        <input type="checkbox" id="newsletterOptIn" checked>
                                        <span class="checkmark"></span>
                                        Send me community updates and newsletters
                                    </label>
                                </div>
                                <div class="form-group">
                                    <label class="checkbox-label">
                                        <input type="checkbox" id="termsAccepted" required>
                                        <span class="checkmark"></span>
                                        I agree to the community guidelines and terms of service
                                    </label>
                                </div>
                            </form>
                        </div>
                        <div class="modal-footer">
                            <button type="button" class="btn btn-secondary" onclick="hideVisitorSignUp()">Cancel</button>
                            <button type="button" class="btn btn-primary" onclick="registerVisitor()">Join Community</button>
                        </div>
                    </div>
                </div>

                <!-- Posts Feed -->
                <div class="posts-feed" id="postsFeed">
                    <!-- Posts will be populated here -->
                </div>

                <!-- Loading More -->
                <div class="load-more" id="loadMore">
                    <button class="btn btn-outline" onclick="loadMorePosts()">
                        <i class="fas fa-chevron-down"></i> Load More Posts
                    </button>
                </div>
            </div>

            <!-- Right Sidebar - Activity & Management -->
            <div class="sidebar-right">
                <!-- Recent Activity -->
                <div class="activity-feed">
                    <h4>Recent Activity</h4>
                    <div id="recentActivity" class="activity-list">
                        <!-- Activity items will populate here -->
                    </div>
                </div>

                <!-- Management Panel (for admins) -->
                <div class="management-panel" id="managementPanel" style="display: none;">
                    <h4>Management Tools</h4>
                    <div class="management-tools">
                        <button class="btn btn-outline management-btn" onclick="showPostManagement()">
                            <i class="fas fa-edit"></i> Manage Posts
                        </button>
                        <button class="btn btn-outline management-btn" onclick="showUserManagement()">
                            <i class="fas fa-users"></i> Manage Users
                        </button>
                        <button class="btn btn-outline management-btn" onclick="showAnalytics()">
                            <i class="fas fa-chart-bar"></i> Analytics
                        </button>
                        <button class="btn btn-outline management-btn" onclick="showModeration()">
                            <i class="fas fa-shield-alt"></i> Moderation
                        </button>
                    </div>
                </div>

                <!-- Suggested Connections -->
                <div class="suggested-connections">
                    <h4>Suggested Connections</h4>
                    <div id="suggestedUsers" class="suggested-list">
                        <!-- Suggested users will populate here -->
                    </div>
                </div>
            </div>
        </div>
    </div>

    <!-- Comment Modal -->
    <div class="modal" id="commentModal" style="display: none;">
        <div class="modal-content large">
            <div class="modal-header">
                <h3>Add Comment</h3>
                <button class="btn-close" onclick="hideCommentModal()">
                    <i class="fas fa-times"></i>
                </button>
            </div>
            <div class="modal-body">
                <div class="comment-creator">
                    <div class="user-info">
                        <img src="https://images.unsplash.com/photo-1472099645785-5658abf4ff4e?w=40&h=40&fit=crop&crop=face" alt="User" class="user-avatar">
                        <span class="user-name" id="commentUserName">Visitor</span>
                    </div>
                    <textarea id="commentContent" class="comment-textarea" placeholder="Write a comment..." maxlength="500"></textarea>
                    <div class="char-count">0 / 500</div>
                </div>
            </div>
            <div class="modal-footer">
                <button type="button" class="btn btn-secondary" onclick="hideCommentModal()">Cancel</button>
                <button type="button" class="btn btn-primary" onclick="publishComment()">Post Comment</button>
            </div>
        </div>
    </div>

    <!-- Scripts -->
    <script src="https://cdn.jsdelivr.net/npm/emoji-picker-element@1.0.0/index.js"></script>
    <script src="interactive-newsfeed.js"></script>
    <script>
        // Facebook Widget Functionality
        const fbSamplePosts = [
            {
                id: 1,
                author: 'Sarah Johnson',
                avatar: 'https://picsum.photos/seed/sarah/50/50',
                time: '2 hours ago',
                content: 'Just launched my new website! Check it out and let me know what you think. 🚀',
                image: 'https://picsum.photos/seed/website/600/400',
                likes: 45,
                comments: 12,
                shares: 3,
                liked: false
            },
            {
                id: 2,
                author: 'Mike Chen',
                avatar: 'https://picsum.photos/seed/mike/50/50',
                time: '4 hours ago',
                content: 'Amazing sunset at the beach today. Sometimes you just need to pause and appreciate the beauty around us. 🌅',
                image: 'https://picsum.photos/seed/sunset/600/400',
                likes: 89,
                comments: 23,
                shares: 7,
                liked: true
            },
            {
                id: 3,
                author: 'Emily Davis',
                avatar: 'https://picsum.photos/seed/emily/50/50',
                time: '6 hours ago',
                content: 'Working on some exciting new features for our app. Cannot wait to share them with you all! 💻✨',
                likes: 67,
                comments: 18,
                shares: 5,
                liked: false
            }
        ];

        function createFBPostHTML(post) {
            return `
                <div class="facebook-post">
                    <div class="post-header">
                        <img src="${post.avatar}" alt="${post.author}" class="post-avatar">
                        <div class="post-meta">
                            <h4 class="post-author">${post.author}</h4>
                            <span class="post-time">${post.time}</span>
                        </div>
                        <button class="post-options">
                            <i class="fas fa-ellipsis-h"></i>
                        </button>
                    </div>
                    
                    <div class="post-content">
                        <p>${post.content}</p>
                        ${post.image ? `<img src="${post.image}" alt="Post image" class="post-image">` : ''}
                    </div>
                    
                    <div class="post-stats">
                        <div class="reactions">
                            <span class="reaction-count">${post.likes}</span>
                            <div class="reaction-icons">
                                <span class="reaction-icon like">👍</span>
                                <span class="reaction-icon love">❤️</span>
                                <span class="reaction-icon wow">😮</span>
                            </div>
                        </div>
                        <div class="shares-comments">
                            <span>${post.comments} comments</span>
                            <span>${post.shares} shares</span>
                        </div>
                    </div>
                    
                    <div class="post-actions">
                        <button class="action-btn ${post.liked ? 'liked' : ''}" data-action="like" data-post-id="${post.id}">
                            <i class="fas fa-thumbs-up"></i>
                            <span>${post.liked ? 'Liked' : 'Like'}</span>
                        </button>
                        <button class="action-btn" data-action="comment" data-post-id="${post.id}">
                            <i class="fas fa-comment"></i>
                            <span>Comment</span>
                        </button>
                        <button class="action-btn" data-action="share" data-post-id="${post.id}">
                            <i class="fas fa-share"></i>
                            <span>Share</span>
                        </button>
                    </div>
                    
                    <div class="comments-section" id="comments-${post.id}" style="display: none;">
                        <div class="comment-input">
                            <img src="https://picsum.photos/seed/currentuser/32/32" alt="You" class="comment-avatar">
                            <input type="text" placeholder="Write a comment..." class="comment-field" data-post-id="${post.id}">
                        </div>
                        <div class="comments-list">
                        </div>
                    </div>
                </div>
            `;
        }

        function loadFBPosts() {
            const postsContainer = document.getElementById('facebookPosts');
            if (postsContainer) {
                fbSamplePosts.forEach(post => {
                    postsContainer.innerHTML += createFBPostHTML(post);
                });
            }
        }

        document.addEventListener('DOMContentLoaded', function() {
            loadFBPosts();
            
            const fbPostBtn = document.getElementById('facebookPostBtn');
            const fbPostInput = document.getElementById('facebookPostInput');
            
            if (fbPostBtn &amp;&amp; fbPostInput) {
                fbPostBtn.addEventListener('click', function() {
                    const content = fbPostInput.value.trim();
                    
                    if (!content) {
                        alert('Please write something before posting!');
                        return;
                    }
                    
                    const newPost = {
                        id: Date.now(),
                        author: 'You',
                        avatar: 'https://picsum.photos/seed/currentuser/50/50',
                        time: 'Just now',
                        content: content,
                        image: null,
                        likes: 0,
                        comments: 0,
                        shares: 0,
                        liked: false
                    };
                    
                    const postsContainer = document.getElementById('facebookPosts');
                    if (postsContainer) {
                        postsContainer.insertAdjacentHTML('afterbegin', createFBPostHTML(newPost));
                        fbPostInput.value = '';
                        alert('Post published successfully!');
                    }
                });
            }
            
            document.addEventListener('click', function(e) {
                if (e.target.closest('.action-btn')) {
                    const btn = e.target.closest('.action-btn');
                    const action = btn.dataset.action;
                    const postId = btn.dataset.postId;
                    
                    if (action === 'like') {
                        const isLiked = btn.classList.contains('liked');
                        btn.classList.toggle('liked');
                        btn.querySelector('span').textContent = isLiked ? 'Like' : 'Liked';
                    } else if (action === 'comment') {
                        const commentsSection = document.getElementById(`comments-${postId}`);
                        if (commentsSection) {
                            commentsSection.style.display = commentsSection.style.display === 'none' ? 'block' : 'none';
                        }
                    } else if (action === 'share') {
                        alert('Post shared to your timeline!');
                    }
                }
            });
            
            document.addEventListener('keypress', function(e) {
                if (e.target.classList.contains('comment-field') &amp;&amp; e.key === 'Enter') {
                    const comment = e.target.value.trim();
                    if (comment) {
                        const commentsList = e.target.closest('.comments-section').querySelector('.comments-list');
                        commentsList.innerHTML += `
                            <div class="comment">
                                <img src="https://picsum.photos/seed/currentuser/32/32" alt="You" class="comment-avatar">
                                <div class="comment-content">
                                    <div class="comment-header">
                                        <span class="comment-author">You</span>
                                        <span class="comment-time">Just now</span>
                                    </div>
                                    <p class="comment-text">${comment}</p>
                                    <div class="comment-actions">
                                        <button class="comment-action">Like</button>
                                        <button class="comment-action">Reply</button>
                                    </div>
                                </div>
                            </div>
                        `;
                        e.target.value = '';
                    }
                }
            });
        });
    </script>
</body>
</html>